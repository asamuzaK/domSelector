{
  "version": 3,
  "sources": ["../../../src/js/nwsapi.js"],
  "sourcesContent": ["/**\n * nwsapi.js\n */\n\n/* import */\nimport nwsapi from '@asamuzakjp/nwsapi';\n\n/* constants */\nimport {\n  DOCUMENT_NODE, REG_LOGICAL_COMPLEX, REG_LOGICAL_COMPOUND, REG_FILTER_CHAR,\n  REG_LOGICAL_EMPTY, REG_LOGICAL_IS_NOT, REG_FILTER_PSEUDO, TYPE_FROM, TYPE_TO\n} from './constant.js';\n\n/**\n * init nwsapi\n * @param {object} window - Window\n * @param {object} document - Document\n * @returns {object} - nwsapi\n */\nexport const initNwsapi = (window, document) => {\n  if (!window || !window.DOMException) {\n    const type =\n      Object.prototype.toString.call(window).slice(TYPE_FROM, TYPE_TO);\n    const msg = `Unexpected global object ${type}`;\n    throw new TypeError(msg);\n  }\n  if (document?.nodeType !== DOCUMENT_NODE) {\n    document = window.document;\n  }\n  const nw = nwsapi({\n    document,\n    DOMException: window.DOMException\n  });\n  nw.configure({\n    LOGERRORS: false\n  });\n  return nw;\n};\n\n/**\n * filter selector\n * @param {string} selector - selector\n * @param {object} opt - options\n * @returns {boolean} - result\n */\nexport const filterSelector = (selector, opt = {}) => {\n  if (!selector || typeof selector !== 'string') {\n    return false;\n  }\n  // filter char\n  if (!REG_FILTER_CHAR.test(selector)) {\n    return false;\n  }\n  // filter missing close square bracket\n  if (selector.includes('[')) {\n    const index = selector.lastIndexOf('[');\n    const sel = selector.substring(index);\n    if (sel.lastIndexOf(']') < 0) {\n      return false;\n    }\n  }\n  // filter namespaced selectors, e.g. ns|E\n  // filter pseudo-element selectors\n  // filter attribute selectors with case flag, e.g. [attr i]\n  // filter unclosed quotes\n  if (/\\||::|\\[\\s*[\\w$*=^|~-]+(?:(?:\"[\\w$*=^|~\\s'-]+\"|'[\\w$*=^|~\\s\"-]+')?(?:\\s+[\\w$*=^|~-]+)+|\"[^\"\\]]{1,255}|'[^'\\]]{1,255})\\s*\\]/.test(selector)) {\n    return false;\n  }\n  // filter pseudo-classes\n  if (selector.includes(':')) {\n    let reg;\n    if (REG_LOGICAL_IS_NOT.test(selector)) {\n      // filter empty :is()\n      if (REG_LOGICAL_EMPTY.test(selector)) {\n        return false;\n      }\n      const { complex, descendant } = opt;\n      if (complex && descendant) {\n        reg = REG_LOGICAL_COMPLEX;\n      } else {\n        reg = REG_LOGICAL_COMPOUND;\n      }\n    } else {\n      reg = REG_FILTER_PSEUDO;\n    }\n    if (reg.test(selector)) {\n      return false;\n    }\n  }\n  return true;\n};\n"],
  "mappings": "6iBAAA,IAAAA,EAAA,GAAAC,EAAAD,EAAA,oBAAAE,EAAA,eAAAC,IAAA,eAAAC,EAAAJ,GAKA,IAAAK,EAAmB,mCAGnBC,EAGO,yBAQA,MAAMH,EAAa,CAACI,EAAQC,IAAa,CAC9C,GAAI,CAACD,GAAU,CAACA,EAAO,aAAc,CAGnC,MAAME,EAAM,4BADV,OAAO,UAAU,SAAS,KAAKF,CAAM,EAAE,MAAM,YAAW,SAAO,CACrB,GAC5C,MAAM,IAAI,UAAUE,CAAG,CACzB,CACID,GAAU,WAAa,kBACzBA,EAAWD,EAAO,UAEpB,MAAMG,KAAK,EAAAC,SAAO,CAChB,SAAAH,EACA,aAAcD,EAAO,YACvB,CAAC,EACD,OAAAG,EAAG,UAAU,CACX,UAAW,EACb,CAAC,EACMA,CACT,EAQaR,EAAiB,CAACU,EAAUC,EAAM,CAAC,IAAM,CAKpD,GAJI,CAACD,GAAY,OAAOA,GAAa,UAIjC,CAAC,kBAAgB,KAAKA,CAAQ,EAChC,MAAO,GAGT,GAAIA,EAAS,SAAS,GAAG,EAAG,CAC1B,MAAME,EAAQF,EAAS,YAAY,GAAG,EAEtC,GADYA,EAAS,UAAUE,CAAK,EAC5B,YAAY,GAAG,EAAI,EACzB,MAAO,EAEX,CAKA,GAAI,6HAA6H,KAAKF,CAAQ,EAC5I,MAAO,GAGT,GAAIA,EAAS,SAAS,GAAG,EAAG,CAC1B,IAAIG,EACJ,GAAI,qBAAmB,KAAKH,CAAQ,EAAG,CAErC,GAAI,oBAAkB,KAAKA,CAAQ,EACjC,MAAO,GAET,KAAM,CAAE,QAAAI,EAAS,WAAAC,CAAW,EAAIJ,EAC5BG,GAAWC,EACbF,EAAM,sBAENA,EAAM,sBAEV,MACEA,EAAM,oBAER,GAAIA,EAAI,KAAKH,CAAQ,EACnB,MAAO,EAEX,CACA,MAAO,EACT",
  "names": ["nwsapi_exports", "__export", "filterSelector", "initNwsapi", "__toCommonJS", "import_nwsapi", "import_constant", "window", "document", "msg", "nw", "nwsapi", "selector", "opt", "index", "reg", "complex", "descendant"]
}
