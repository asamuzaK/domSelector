var U=Object.create;var f=Object.defineProperty;var _=Object.getOwnPropertyDescriptor;var I=Object.getOwnPropertyNames;var $=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var A=(e,t)=>{for(var i in t)f(e,i,{get:t[i],enumerable:!0})},E=(e,t,i,r)=>{if(t&&typeof t=="object"||typeof t=="function")for(let n of I(t))!k.call(e,n)&&n!==i&&f(e,n,{get:()=>t[n],enumerable:!(r=_(t,n))||r.enumerable});return e};var T=(e,t,i)=>(i=e!=null?U($(e)):{},E(t||!e||!e.__esModule?f(i,"default",{value:e,enumerable:!0}):i,e)),L=e=>E(f({},"__esModule",{value:!0}),e);var q={};A(q,{filterSelector:()=>H,getDirectionality:()=>N,getNamespaceURI:()=>C,getSlottedTextContent:()=>p,getType:()=>c,initNwsapi:()=>j,isContentEditable:()=>y,isCustomElement:()=>G,isFocusVisible:()=>V,isFocusable:()=>Y,isFocusableArea:()=>K,isInShadowTree:()=>O,isNamespaceDeclared:()=>X,isPreceding:()=>D,isVisible:()=>F,resolveContent:()=>P,sortNodes:()=>W,traverseNode:()=>v});module.exports=L(q);var h=T(require("@asamuzakjp/nwsapi"),1),g=T(require("bidi-js"),1),d=T(require("is-potential-custom-element-name"),1),s=require("./constant.js");const R=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH}|${s.LOGICAL_COMPLEX})`),S=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH}|${s.LOGICAL_COMPOUND})`),M=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH})`),c=e=>Object.prototype.toString.call(e).slice(s.TYPE_FROM,s.TYPE_TO),P=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let t,i;switch(e.nodeType){case s.DOCUMENT_NODE:{t=e,i=e;break}case s.DOCUMENT_FRAGMENT_NODE:{t=e.ownerDocument,i=e;break}case s.ELEMENT_NODE:{t=e.ownerDocument;let n=e;for(;n&&n.parentNode;)n=n.parentNode;i=n;break}default:throw new TypeError(`Unexpected node ${e.nodeName}`)}const r=t.createTreeWalker(i,s.WALKER_FILTER);return[t,i,r]},v=(e,t)=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let i;if(t?.currentNode){let r=t.currentNode;if(r===e)return r;if(r.contains(e))for(r=t.nextNode();r;){if(r===e)return r;r=t.nextNode()}else{if(r!==t.root)for(;r&&!(r===t.root||r===e);)r=t.parentNode();if(e.nodeType===s.ELEMENT_NODE)for(;r;){if(r===e)return r;r=t.nextNode()}else i=r}}return i??null},G=(e,t={})=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let i;if(e.nodeType===s.ELEMENT_NODE){const{localName:r,ownerDocument:n}=e,{formAssociated:a}=t,l=n.defaultView;let o;const u=e.getAttribute("is");u?o=(0,d.default)(u)&&l.customElements.get(u):o=(0,d.default)(r)&&l.customElements.get(r),o&&(a?i=o.formAssociated:i=!0)}return!!i},O=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let t;if(e.nodeType===s.ELEMENT_NODE||e.nodeType===s.DOCUMENT_FRAGMENT_NODE){let i=e;for(;i;){const{host:r,mode:n,nodeType:a,parentNode:l}=i;if(r&&n&&a===s.DOCUMENT_FRAGMENT_NODE&&(n==="close"||n==="open")){t=!0;break}i=l}}return!!t},p=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let t;if(e.localName==="slot"&&O(e)){const i=e.assignedNodes();if(i.length){for(const r of i)if(t=r.textContent.trim(),t)break}else t=e.textContent.trim()}return t??null},N=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let t;if(e.nodeType===s.ELEMENT_NODE){const{dir:i,localName:r,parentNode:n}=e,{getEmbeddingLevels:a}=(0,g.default)();if(i==="ltr"||i==="rtl")return i;if(i==="auto"){let l;switch(r){case"input":{const o=[...s.KEY_INPUT_BUTTON,...s.KEY_INPUT_TEXT,"hidden"];if(!e.type||o.includes(e.type))l=e.value;else if(["checkbox","color","date","image","number","range","radio","time"].includes(e.type))return"ltr";break}case"slot":{l=p(e);break}case"textarea":{l=e.value;break}default:{const o=[].slice.call(e.childNodes);for(const u of o){const{dir:m,localName:b,nodeType:w,textContent:x}=u;if(w===s.TEXT_NODE?l=x.trim():w===s.ELEMENT_NODE&&!["bdi","script","style","textarea"].includes(b)&&(!m||m!=="ltr"&&m!=="rtl")&&(b==="slot"?l=p(u):l=x.trim()),l)break}}}if(l){const{paragraphs:[{level:o}]}=a(l);return o%2===1?"rtl":"ltr"}if(!t)if(n){const{nodeType:o}=n;if(o===s.ELEMENT_NODE)return N(n);if(o===s.DOCUMENT_NODE||o===s.DOCUMENT_FRAGMENT_NODE)return"ltr"}else return"ltr"}else if(r==="bdi"){const l=e.textContent.trim();if(l){const{paragraphs:[{level:o}]}=a(l);return o%2===1?"rtl":"ltr"}if(!(t||n))return"ltr"}else{if(r==="input"&&e.type==="tel")return"ltr";if(n){if(r==="slot"){const l=p(e);if(l){const{paragraphs:[{level:o}]}=a(l);return o%2===1?"rtl":"ltr"}}if(!t){const{nodeType:l}=n;if(l===s.ELEMENT_NODE)return N(n);if(l===s.DOCUMENT_NODE||l===s.DOCUMENT_FRAGMENT_NODE)return"ltr"}}else return"ltr"}}return t??null},y=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${c(e)}`);let t;if(e.nodeType===s.ELEMENT_NODE){if(typeof e.isContentEditable=="boolean")return e.isContentEditable;if(e.ownerDocument.designMode==="on")return!0;if(e.hasAttribute("contenteditable"))switch(e.getAttribute("contenteditable")){case"":case"true":return!0;case"plaintext-only":return!0;case"false":return!1;default:{let r=e.parentNode;for(;r;){if(y(r))return!0;r=r.parentNode}break}}}return!!t},F=e=>{let t;if(e?.nodeType===s.ELEMENT_NODE){const i=e.ownerDocument.defaultView,{display:r,visibility:n}=i.getComputedStyle(e);if(r!=="none"&&n==="visible")return!0}return!!t},V=e=>{let t;if(e?.nodeType===s.ELEMENT_NODE){const{localName:i,type:r}=e;switch(i){case"input":{if(!r||s.KEY_INPUT_EDIT.includes(r))return!0;break}case"textarea":return!0;default:return y(e)}}return!!t},K=e=>{if(e?.nodeType===s.ELEMENT_NODE){if(!e.isConnected)return!1;const t=e.ownerDocument.defaultView;if(e instanceof t.HTMLElement){if(Number.isInteger(parseInt(e.getAttribute("tabindex")))||y(e))return!0;const{localName:i,parentNode:r}=e;switch(i){case"a":return!!(e.href||e.hasAttribute("href"));case"iframe":return!0;case"input":return!(e.disabled||e.hasAttribute("disabled")||e.hidden||e.hasAttribute("hidden"));case"summary":{if(r.localName==="details"){let n=r.firstElementChild;for(;n;){if(n.localName==="summary")return e===n;n=n.nextElementSibling}}return!1}default:return!!(new Set(["button","select","textarea"]).has(i)&&!(e.disabled||e.hasAttribute("disabled")))}}else if(e instanceof t.SVGElement){if(Number.isInteger(parseInt(e.getAttributeNS(null,"tabindex")))){const i=new Set(["clipPath","defs","desc","linearGradient","marker","mask","metadata","pattern","radialGradient","script","style","symbol","title"]),r="http://www.w3.org/2000/svg";let n,a=e;for(;a.namespaceURI===r&&(n=i.has(a.localName),!n);)if(a?.parentNode?.namespaceURI===r)a=a.parentNode;else break;return!n}if(e.localName==="a"&&(e.href||e.hasAttributeNS(null,"href")))return!0}}return!1},Y=e=>{let t;if(e?.nodeType===s.ELEMENT_NODE){const i=e.ownerDocument.defaultView;let r=e;for(t=!0;r;){if(r.disabled||r.hasAttribute("disabled"))return!1;(r.hidden||r.hasAttribute("hidden"))&&(t=!1);const{contentVisibility:n,display:a,visibility:l}=i.getComputedStyle(r);if(a==="none"||l!=="visible"||n==="hidden"&&r!==e?t=!1:t=!0,t&&r?.parentNode?.nodeType===s.ELEMENT_NODE)r=r.parentNode;else break}}return!!t},C=(e,t)=>{if(typeof e!="string")throw new TypeError(`Unexpected type ${c(e)}`);if(!t?.nodeType)throw new TypeError(`Unexpected type ${c(t)}`);let i;if(e&&t.nodeType===s.ELEMENT_NODE){const{attributes:r}=t;for(const n of r){const{name:a,namespaceURI:l,prefix:o,value:u}=n;if(a===`xmlns:${e}`)return u;if(o===e)return l}}return i??null},X=(e="",t={})=>{let i;if(e&&typeof e=="string"&&t.nodeType===s.ELEMENT_NODE&&(i=t.lookupNamespaceURI(e),!i)){const r=t.ownerDocument.documentElement;let n=t;for(;n&&(i=C(e,n),!(i||n===r));)n=n.parentNode}return!!i},D=(e,t)=>{if(e?.nodeType){if(!t?.nodeType)throw new TypeError(`Unexpected type ${c(t)}`)}else throw new TypeError(`Unexpected type ${c(e)}`);let i;if(e.nodeType===s.ELEMENT_NODE&&t.nodeType===s.ELEMENT_NODE){const r=t.compareDocumentPosition(e);i=r&s.DOCUMENT_POSITION_PRECEDING||r&s.DOCUMENT_POSITION_CONTAINS}return!!i},W=(e=[])=>{const t=[...e];return t.length>1&&t.sort((i,r)=>{let n;return D(r,i)?n=1:n=-1,n}),t},j=(e,t)=>{if(!e?.DOMException)throw new TypeError(`Unexpected global object ${c(e)}`);t?.nodeType!==s.DOCUMENT_NODE&&(t=e.document);const i=(0,h.default)({document:t,DOMException:e.DOMException});return i.configure({LOGERRORS:!1}),i},H=(e,t={})=>{if(!e||typeof e!="string")return!1;if(e.includes("[")){const i=e.lastIndexOf("[");if(e.substring(i).indexOf("]")<0)return!1}if(/[|\\]|::|[^\u0021-\u007F\s]|\[\s*[\w$*=^|~-]+(?:(?:"[\w$*=^|~\s'-]+"|'[\w$*=^|~\s"-]+')?(?:\s+[\w$*=^|~-]+)+|"[^"\]]{1,255}|'[^'\]]{1,255})\s*\]|:(?:is|where)\(\s*\)/.test(e))return!1;if(e.includes(":")){const{complex:i,descend:r}=t;return/:(?:is|not)\(/.test(e)?i?!R.test(e):!S.test(e):r?!1:!M.test(e)}return!0};0&&(module.exports={filterSelector,getDirectionality,getNamespaceURI,getSlottedTextContent,getType,initNwsapi,isContentEditable,isCustomElement,isFocusVisible,isFocusable,isFocusableArea,isInShadowTree,isNamespaceDeclared,isPreceding,isVisible,resolveContent,sortNodes,traverseNode});
//# sourceMappingURL=utility.js.map
