var C=Object.create;var c=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var R=Object.getPrototypeOf,I=Object.prototype.hasOwnProperty;var M=(e,t)=>{for(var r in t)c(e,r,{get:t[r],enumerable:!0})},w=(e,t,r,i)=>{if(t&&typeof t=="object"||typeof t=="function")for(let s of _(t))!I.call(e,s)&&s!==r&&c(e,s,{get:()=>t[s],enumerable:!(i=U(t,s))||i.enumerable});return e};var y=(e,t,r)=>(r=e!=null?C(R(e)):{},w(t||!e||!e.__esModule?c(r,"default",{value:e,enumerable:!0}):r,e)),k=e=>w(c({},"__esModule",{value:!0}),e);var W={};M(W,{filterSelector:()=>A,getDirectionality:()=>m,getNamespaceURI:()=>D,getSlottedTextContent:()=>u,getType:()=>p,initNwsapi:()=>G,isContentEditable:()=>O,isCustomElement:()=>S,isInShadowTree:()=>g,isNamespaceDeclared:()=>v,isPreceding:()=>$,resolveContent:()=>L,sortNodes:()=>F,traverseNode:()=>P});module.exports=k(W);var d=y(require("@asamuzakjp/nwsapi"),1),h=y(require("bidi-js"),1),T=y(require("is-potential-custom-element-name"),1),o=require("./constant.js");const p=e=>Object.prototype.toString.call(e).slice(o.TYPE_FROM,o.TYPE_TO),L=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let t,r;switch(e.nodeType){case o.DOCUMENT_NODE:{t=e,r=e;break}case o.DOCUMENT_FRAGMENT_NODE:{t=e.ownerDocument,r=e;break}case o.ELEMENT_NODE:{t=e.ownerDocument;let s=e;for(;s&&s.parentNode;)s=s.parentNode;r=s;break}default:throw new TypeError(`Unexpected node ${e.nodeName}`)}const i=t.createTreeWalker(r,o.WALKER_FILTER);return[t,r,i]},P=(e,t)=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let r;if(t?.currentNode){let i=t.currentNode;if(i===e)r=i;else if(i.contains(e))for(i=t.nextNode();i;){if(i===e){r=i;break}i=t.nextNode()}else{if(i!==t.root)for(;i&&!(i===t.root||i===e);)i=t.parentNode();if(e.nodeType===o.ELEMENT_NODE)for(;i;){if(i===e){r=i;break}i=t.nextNode()}else r=i}}return r??null},S=(e,t={})=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let r;if(e.nodeType===o.ELEMENT_NODE){const{localName:i,ownerDocument:s}=e,{formAssociated:a}=t,n=s.defaultView;let l;const f=e.getAttribute("is");f?l=(0,T.default)(f)&&n.customElements.get(f):l=(0,T.default)(i)&&n.customElements.get(i),l&&(a?r=l.formAssociated:r=!0)}return!!r},g=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let t;if(e.nodeType===o.ELEMENT_NODE||e.nodeType===o.DOCUMENT_FRAGMENT_NODE){let r=e;for(;r;){const{host:i,mode:s,nodeType:a,parentNode:n}=r;if(i&&s&&a===o.DOCUMENT_FRAGMENT_NODE&&o.REG_SHADOW_MODE.test(s)){t=!0;break}r=n}}return!!t},u=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let t;if(e.localName==="slot"&&g(e)){const r=e.assignedNodes();if(r.length){for(const i of r)if(t=i.textContent.trim(),t)break}else t=e.textContent.trim()}return t??null},m=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let t;if(e.nodeType===o.ELEMENT_NODE){const{dir:r,localName:i,parentNode:s}=e,{getEmbeddingLevels:a}=(0,h.default)();if(o.REG_DIR.test(r))t=r;else if(r==="auto"){let n;switch(i){case"input":{!e.type||/^(?:button|email|hidden|password|reset|search|submit|tel|text|url)$/.test(e.type)?n=e.value:/^(?:checkbox|color|date|image|number|radio|range|time)$/.test(e.type)&&(t="ltr");break}case"slot":{n=u(e);break}case"textarea":{n=e.value;break}default:{const l=[].slice.call(e.childNodes);for(const f of l){const{dir:E,localName:x,nodeType:N,textContent:b}=f;if(N===o.TEXT_NODE?n=b.trim():N===o.ELEMENT_NODE&&!/^(?:bdi|script|style|textarea)$/.test(x)&&(!E||!o.REG_DIR.test(E))&&(x==="slot"?n=u(f):n=b.trim()),n)break}}}if(n){const{paragraphs:[{level:l}]}=a(n);l%2===1?t="rtl":t="ltr"}if(!t)if(s){const{nodeType:l}=s;l===o.ELEMENT_NODE?t=m(s):(l===o.DOCUMENT_NODE||l===o.DOCUMENT_FRAGMENT_NODE)&&(t="ltr")}else t="ltr"}else if(i==="bdi"){const n=e.textContent.trim();if(n){const{paragraphs:[{level:l}]}=a(n);l%2===1?t="rtl":t="ltr"}t||s||(t="ltr")}else if(i==="input"&&e.type==="tel")t="ltr";else if(s){if(i==="slot"){const n=u(e);if(n){const{paragraphs:[{level:l}]}=a(n);l%2===1?t="rtl":t="ltr"}}if(!t){const{nodeType:n}=s;n===o.ELEMENT_NODE?t=m(s):(n===o.DOCUMENT_NODE||n===o.DOCUMENT_FRAGMENT_NODE)&&(t="ltr")}}else t="ltr"}return t??null},O=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${p(e)}`);let t;if(e.nodeType===o.ELEMENT_NODE){if(typeof e.isContentEditable=="boolean")t=e.isContentEditable;else if(e.ownerDocument.designMode==="on")t=!0;else if(e.hasAttribute("contenteditable")){const r=e.getAttribute("contenteditable");if(r===""||/^(?:plaintext-only|true)$/.test(r))t=!0;else if(r==="inherit"){let i=e.parentNode;for(;i;){if(O(i)){t=!0;break}i=i.parentNode}}}}return!!t},D=(e,t)=>{if(typeof e!="string")throw new TypeError(`Unexpected type ${p(e)}`);if(!t?.nodeType)throw new TypeError(`Unexpected type ${p(t)}`);let r;if(e&&t.nodeType===o.ELEMENT_NODE){const{attributes:i}=t;for(const s of i){const{name:a,namespaceURI:n,prefix:l,value:f}=s;if(a===`xmlns:${e}`){r=f;break}else if(l===e){r=n;break}}}return r??null},v=(e="",t={})=>{let r;if(e&&typeof e=="string"&&t.nodeType===o.ELEMENT_NODE&&(r=t.lookupNamespaceURI(e),!r)){const i=t.ownerDocument.documentElement;let s=t;for(;s&&(r=D(e,s),!(r||s===i));)s=s.parentNode}return!!r},$=(e,t)=>{if(e?.nodeType){if(!t?.nodeType)throw new TypeError(`Unexpected type ${p(t)}`)}else throw new TypeError(`Unexpected type ${p(e)}`);let r;if(e.nodeType===o.ELEMENT_NODE&&t.nodeType===o.ELEMENT_NODE){const i=t.compareDocumentPosition(e);r=i&o.DOCUMENT_POSITION_PRECEDING||i&o.DOCUMENT_POSITION_CONTAINS}return!!r},F=(e=[])=>{const t=[...e];return t.length>1&&t.sort((r,i)=>{let s;return $(i,r)?s=1:s=-1,s}),t},G=(e,t)=>{if(!e?.DOMException)throw new TypeError(`Unexpected global object ${p(e)}`);t?.nodeType!==o.DOCUMENT_NODE&&(t=e.document);const r=(0,d.default)({document:t,DOMException:e.DOMException});return r.configure({LOGERRORS:!1}),r},A=(e,t={})=>{if(!e||typeof e!="string")return!1;if(e.includes("[")){const r=e.lastIndexOf("[");if(e.substring(r).indexOf("]")<0)return!1}if(/\||::|[^\u0021-\u007F\s]|\[\s*[\w$*=^|~-]+(?:(?:"[\w$*=^|~\s'-]+"|'[\w$*=^|~\s"-]+')?(?:\s+[\w$*=^|~-]+)+|"[^"\]]{1,255}|'[^'\]]{1,255})\s*\]|:(?:is|where)\(\s*\)/.test(e))return!1;if(e.includes(":")){let r;if(/:(?:is|not)\(/.test(e)){const{complex:i}=t;i?r=o.REG_FILTER_COMPLEX:r=o.REG_FILTER_COMPOUND}else r=o.REG_FILTER_SIMPLE;if(r.test(e))return!1}return!0};0&&(module.exports={filterSelector,getDirectionality,getNamespaceURI,getSlottedTextContent,getType,initNwsapi,isContentEditable,isCustomElement,isInShadowTree,isNamespaceDeclared,isPreceding,resolveContent,sortNodes,traverseNode});
//# sourceMappingURL=utility.js.map
