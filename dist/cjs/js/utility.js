var D=Object.create;var c=Object.defineProperty;var U=Object.getOwnPropertyDescriptor;var _=Object.getOwnPropertyNames;var I=Object.getPrototypeOf,k=Object.prototype.hasOwnProperty;var $=(e,r)=>{for(var t in r)c(e,t,{get:r[t],enumerable:!0})},x=(e,r,t,i)=>{if(r&&typeof r=="object"||typeof r=="function")for(let n of _(r))!k.call(e,n)&&n!==t&&c(e,n,{get:()=>r[n],enumerable:!(i=U(r,n))||i.enumerable});return e};var m=(e,r,t)=>(t=e!=null?D(I(e)):{},x(r||!e||!e.__esModule?c(t,"default",{value:e,enumerable:!0}):t,e)),A=e=>x(c({},"__esModule",{value:!0}),e);var H={};$(H,{filterSelector:()=>j,getDirectionality:()=>T,getNamespaceURI:()=>O,getSlottedTextContent:()=>p,getType:()=>o,initNwsapi:()=>W,isContentEditable:()=>y,isCustomElement:()=>v,isFocusVisible:()=>F,isFocusable:()=>K,isFocusableArea:()=>V,isInShadowTree:()=>g,isNamespaceDeclared:()=>Y,isPreceding:()=>C,isVisible:()=>G,resolveContent:()=>M,sortNodes:()=>X,traverseNode:()=>P});module.exports=A(H);var E=m(require("@asamuzakjp/nwsapi"),1),h=m(require("bidi-js"),1),b=m(require("is-potential-custom-element-name"),1),s=require("./constant.js");const L=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH}|${s.LOGICAL_COMPLEX})`),R=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH}|${s.LOGICAL_COMPOUND})`),S=new RegExp(`:(?!${s.PSEUDO_CLASS}|${s.N_TH})`),o=e=>Object.prototype.toString.call(e).slice(s.TYPE_FROM,s.TYPE_TO),M=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);let r,t;switch(e.nodeType){case s.DOCUMENT_NODE:{r=e,t=e;break}case s.DOCUMENT_FRAGMENT_NODE:{r=e.ownerDocument,t=e;break}case s.ELEMENT_NODE:{r=e.ownerDocument;let n=e;for(;n&&n.parentNode;)n=n.parentNode;t=n;break}default:throw new TypeError(`Unexpected node ${e.nodeName}`)}const i=r.createTreeWalker(t,s.WALKER_FILTER);return[r,t,i]},P=(e,r)=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(!r)return null;let t=r.currentNode;if(t===e)return t;if(t.contains(e)){for(t=r.nextNode();t&&t!==e;)t=r.nextNode();return t}else{if(t!==r.root){let i;for(;t;){if(t===e){i=!0;break}else if(t===r.root)break;t=r.parentNode()}if(i)return t}if(e.nodeType===s.ELEMENT_NODE){let i;for(;t;){if(t===e){i=!0;break}t=r.nextNode()}if(i)return t}}return null},v=(e,r={})=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(e.nodeType!==s.ELEMENT_NODE)return!1;const{localName:t,ownerDocument:i}=e,{formAssociated:n}=r,l=i.defaultView;let a;const u=e.getAttribute("is");return u?a=(0,b.default)(u)&&l.customElements.get(u):a=(0,b.default)(t)&&l.customElements.get(t),a?n?!!a.formAssociated:!0:!1},g=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(e.nodeType!==s.ELEMENT_NODE&&e.nodeType!==s.DOCUMENT_FRAGMENT_NODE)return!1;let r=e,t=!1;for(;r;){const{host:i,mode:n,nodeType:l,parentNode:a}=r;if(i&&n&&l===s.DOCUMENT_FRAGMENT_NODE&&(n==="close"||n==="open")){t=!0;break}r=a}return t},p=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(e.localName!=="slot"||!g(e))return null;const r=e.assignedNodes();if(r.length){let t;for(const i of r)if(t=i.textContent.trim(),t)break;return t}return e.textContent.trim()},T=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(e.nodeType!==s.ELEMENT_NODE)return null;const{dir:r,localName:t,parentNode:i}=e,{getEmbeddingLevels:n}=(0,h.default)();if(r==="ltr"||r==="rtl")return r;if(r==="auto"){let l;switch(t){case"input":{const a=[...s.KEY_INPUT_BUTTON,...s.KEY_INPUT_TEXT,"hidden"];if(!e.type||a.includes(e.type))l=e.value;else if(["checkbox","color","date","image","number","range","radio","time"].includes(e.type))return"ltr";break}case"slot":{l=p(e);break}case"textarea":{l=e.value;break}default:{const a=[].slice.call(e.childNodes);for(const u of a){const{dir:f,localName:d,nodeType:N,textContent:w}=u;if(N===s.TEXT_NODE?l=w.trim():N===s.ELEMENT_NODE&&!["bdi","script","style","textarea"].includes(d)&&(!f||f!=="ltr"&&f!=="rtl")&&(d==="slot"?l=p(u):l=w.trim()),l)break}}}if(l){const{paragraphs:[{level:a}]}=n(l);if(a%2===1)return"rtl"}else if(i){const{nodeType:a}=i;if(a===s.ELEMENT_NODE)return T(i)}}else{if(t==="input"&&e.type==="tel")return"ltr";if(t==="bdi"){const l=e.textContent.trim();if(l){const{paragraphs:[{level:a}]}=n(l);if(a%2===1)return"rtl"}}else if(i){if(t==="slot"){const a=p(e);if(a){const{paragraphs:[{level:u}]}=n(a);return u%2===1?"rtl":"ltr"}}const{nodeType:l}=i;if(l===s.ELEMENT_NODE)return T(i)}}return"ltr"},y=e=>{if(!e?.nodeType)throw new TypeError(`Unexpected type ${o(e)}`);if(e.nodeType!==s.ELEMENT_NODE)return!1;if(typeof e.isContentEditable=="boolean")return e.isContentEditable;if(e.ownerDocument.designMode==="on")return!0;if(e.hasAttribute("contenteditable"))switch(e.getAttribute("contenteditable")){case"":case"true":return!0;case"plaintext-only":return!0;case"false":return!1;default:{let t=e.parentNode,i=!1;for(;t;){if(y(t)){i=!0;break}t=t.parentNode}return i}}return!1},G=e=>{if(e?.nodeType!==s.ELEMENT_NODE)return!1;const r=e.ownerDocument.defaultView,{display:t,visibility:i}=r.getComputedStyle(e);return t!=="none"&&i==="visible"},F=e=>{if(e?.nodeType!==s.ELEMENT_NODE)return!1;const{localName:r,type:t}=e;switch(r){case"input":return!!(!t||s.KEY_INPUT_EDIT.includes(t));case"textarea":return!0;default:return y(e)}},V=e=>{if(e?.nodeType!==s.ELEMENT_NODE||!e.isConnected)return!1;const r=e.ownerDocument.defaultView;if(e instanceof r.HTMLElement){if(Number.isInteger(parseInt(e.getAttribute("tabindex")))||y(e))return!0;const{localName:t,parentNode:i}=e;switch(t){case"a":return!!(e.href||e.hasAttribute("href"));case"iframe":return!0;case"input":return!(e.disabled||e.hasAttribute("disabled")||e.hidden||e.hasAttribute("hidden"));case"summary":{if(i.localName==="details"){let n=i.firstElementChild,l=!1;for(;n;){if(n.localName==="summary"){l=n===e;break}n=n.nextElementSibling}return l}return!1}default:if(["button","select","textarea"].includes(t)&&!(e.disabled||e.hasAttribute("disabled")))return!0}}else if(e instanceof r.SVGElement){if(Number.isInteger(parseInt(e.getAttributeNS(null,"tabindex")))){const t=["clipPath","defs","desc","linearGradient","marker","mask","metadata","pattern","radialGradient","script","style","symbol","title"],i="http://www.w3.org/2000/svg";let n,l=e;for(;l.namespaceURI===i&&(n=t.includes(l.localName),!n);)if(l?.parentNode?.namespaceURI===i)l=l.parentNode;else break;return!n}if(e.localName==="a"&&(e.href||e.hasAttributeNS(null,"href")))return!0}return!1},K=e=>{if(e?.nodeType!==s.ELEMENT_NODE)return!1;const r=e.ownerDocument.defaultView;let t=e,i=!0;for(;t;){if(t.disabled||t.hasAttribute("disabled")){i=!1;break}(t.hidden||t.hasAttribute("hidden"))&&(i=!1);const{contentVisibility:n,display:l,visibility:a}=r.getComputedStyle(t);if(l==="none"||a!=="visible"||n==="hidden"&&t!==e?i=!1:i=!0,i&&t?.parentNode?.nodeType===s.ELEMENT_NODE)t=t.parentNode;else break}return i},O=(e,r)=>{if(typeof e!="string")throw new TypeError(`Unexpected type ${o(e)}`);if(!r?.nodeType)throw new TypeError(`Unexpected type ${o(r)}`);if(!e||r.nodeType!==s.ELEMENT_NODE)return null;const{attributes:t}=r;let i;for(const n of t){const{name:l,namespaceURI:a,prefix:u,value:f}=n;if(l===`xmlns:${e}`?i=f:u===e&&(i=a),i)break}return i??null},Y=(e="",r={})=>{if(!e||typeof e!="string"||r?.nodeType!==s.ELEMENT_NODE)return!1;if(r.lookupNamespaceURI(e))return!0;const t=r.ownerDocument.documentElement;let i=r,n;for(;i&&(n=O(e,i),!(n||i===t));)i=i.parentNode;return!!n},C=(e,r)=>{if(e?.nodeType){if(!r?.nodeType)throw new TypeError(`Unexpected type ${o(r)}`)}else throw new TypeError(`Unexpected type ${o(e)}`);if(e.nodeType!==s.ELEMENT_NODE||r.nodeType!==s.ELEMENT_NODE)return!1;const t=r.compareDocumentPosition(e);return!!(t&s.DOCUMENT_POSITION_PRECEDING||t&s.DOCUMENT_POSITION_CONTAINS)},X=(e=[])=>{const r=[...e];return r.length>1&&r.sort((t,i)=>{let n;return C(i,t)?n=1:n=-1,n}),r},W=(e,r)=>{if(!e?.DOMException)throw new TypeError(`Unexpected global object ${o(e)}`);r?.nodeType!==s.DOCUMENT_NODE&&(r=e.document);const t=(0,E.default)({document:r,DOMException:e.DOMException});return t.configure({LOGERRORS:!1}),t},j=(e,r={})=>{if(!e||typeof e!="string")return!1;if(e.includes("[")){const t=e.lastIndexOf("[");if(e.substring(t).indexOf("]")<0)return!1}if(/[|\\]|::|[^\u0021-\u007F\s]|\[\s*[\w$*=^|~-]+(?:(?:"[\w$*=^|~\s'-]+"|'[\w$*=^|~\s"-]+')?(?:\s+[\w$*=^|~-]+)+|"[^"\]]{1,255}|'[^'\]]{1,255})\s*\]|:(?:is|where)\(\s*\)/.test(e))return!1;if(e.includes(":")){const{complex:t,descend:i}=r;return/:(?:is|not)\(/.test(e)?t?!L.test(e):!R.test(e):i?!1:!S.test(e)}return!0};0&&(module.exports={filterSelector,getDirectionality,getNamespaceURI,getSlottedTextContent,getType,initNwsapi,isContentEditable,isCustomElement,isFocusVisible,isFocusable,isFocusableArea,isInShadowTree,isNamespaceDeclared,isPreceding,isVisible,resolveContent,sortNodes,traverseNode});
//# sourceMappingURL=utility.js.map
